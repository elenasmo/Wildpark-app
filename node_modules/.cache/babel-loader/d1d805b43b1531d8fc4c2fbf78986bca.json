{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Preview = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _theming = require(\"@storybook/theming\");\n\nvar _polished = require(\"polished\");\n\nvar _clientLogger = require(\"@storybook/client-logger\");\n\nvar _BlockBackgroundStyles = require(\"./BlockBackgroundStyles\");\n\nvar _Source = require(\"./Source\");\n\nvar _ActionBar = require(\"../ActionBar/ActionBar\");\n\nvar _Toolbar = require(\"./Toolbar\");\n\nvar _ZoomContext = require(\"./ZoomContext\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar ChildrenContainer = _theming.styled.div(function (_ref) {\n  var isColumn = _ref.isColumn,\n      columns = _ref.columns;\n  return {\n    display: 'flex',\n    flexWrap: 'wrap',\n    flexDirection: isColumn ? 'column' : 'row',\n    marginTop: -20,\n    '> *': {\n      flex: columns ? \"1 1 calc(100%/\".concat(columns, \" - 20px)\") : \"1 1 0%\",\n      marginRight: 20,\n      marginTop: 20\n    }\n  };\n});\n\nvar StyledSource = (0, _theming.styled)(_Source.Source)(function (_ref2) {\n  var theme = _ref2.theme;\n  return {\n    margin: 0,\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 0,\n    borderBottomLeftRadius: theme.appBorderRadius,\n    borderBottomRightRadius: theme.appBorderRadius,\n    border: 'none',\n    background: theme.base === 'light' ? 'rgba(0, 0, 0, 0.85)' : (0, _polished.darken)(0.05, theme.background.content),\n    color: theme.color.lightest,\n    button: {\n      background: theme.base === 'light' ? 'rgba(0, 0, 0, 0.85)' : (0, _polished.darken)(0.05, theme.background.content)\n    }\n  };\n});\n\nvar PreviewWrapper = _theming.styled.div(function (_ref3) {\n  var theme = _ref3.theme,\n      withSource = _ref3.withSource,\n      isExpanded = _ref3.isExpanded;\n  return Object.assign({}, (0, _BlockBackgroundStyles.getBlockBackgroundStyle)(theme), {\n    padding: '30px 20px',\n    position: 'relative',\n    overflow: 'hidden',\n    borderBottomLeftRadius: withSource && isExpanded && 0,\n    borderBottomRightRadius: withSource && isExpanded && 0,\n    borderBottomWidth: isExpanded && 0\n  });\n}, function (_ref4) {\n  var withToolbar = _ref4.withToolbar;\n  return withToolbar && {\n    paddingTop: 64\n  };\n});\n\nvar PreviewContainer = _theming.styled.div({\n  margin: '25px 0 40px'\n});\n\nvar getSource = function getSource(withSource, expanded, setExpanded) {\n  switch (true) {\n    case !!(withSource && withSource.error):\n      {\n        return {\n          source: null,\n          actionItem: {\n            title: 'No code available',\n            disabled: true,\n            onClick: function onClick() {\n              return setExpanded(false);\n            }\n          }\n        };\n      }\n\n    case expanded:\n      {\n        return {\n          source: _react[\"default\"].createElement(StyledSource, _extends({}, withSource, {\n            dark: true\n          })),\n          actionItem: {\n            title: 'Hide code',\n            onClick: function onClick() {\n              return setExpanded(false);\n            }\n          }\n        };\n      }\n\n    default:\n      {\n        return {\n          source: null,\n          actionItem: {\n            title: 'Show code',\n            onClick: function onClick() {\n              return setExpanded(true);\n            }\n          }\n        };\n      }\n  }\n};\n\nfunction getStoryId(children) {\n  if (_react[\"default\"].Children.count(children) === 1) {\n    var elt = children;\n\n    if (elt.props) {\n      return elt.props.id;\n    }\n  }\n\n  return null;\n}\n/**\n * A preview component for showing one or more component `Story`\n * items. The preview also shows the source for the component\n * as a drop-down.\n */\n\n\nvar Preview = function Preview(_ref5) {\n  var isColumn = _ref5.isColumn,\n      columns = _ref5.columns,\n      children = _ref5.children,\n      withSource = _ref5.withSource,\n      _ref5$withToolbar = _ref5.withToolbar,\n      withToolbar = _ref5$withToolbar === void 0 ? false : _ref5$withToolbar,\n      _ref5$isExpanded = _ref5.isExpanded,\n      isExpanded = _ref5$isExpanded === void 0 ? false : _ref5$isExpanded,\n      props = _objectWithoutProperties(_ref5, [\"isColumn\", \"columns\", \"children\", \"withSource\", \"withToolbar\", \"isExpanded\"]);\n\n  var _React$useState = _react[\"default\"].useState(isExpanded),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      expanded = _React$useState2[0],\n      setExpanded = _React$useState2[1];\n\n  var _getSource = getSource(withSource, expanded, setExpanded),\n      source = _getSource.source,\n      actionItem = _getSource.actionItem;\n\n  var _React$useState3 = _react[\"default\"].useState(1),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      scale = _React$useState4[0],\n      setScale = _React$useState4[1];\n\n  if (withToolbar && Array.isArray(children)) {\n    _clientLogger.logger.warn('Cannot use toolbar with multiple preview children, disabling');\n  }\n\n  var showToolbar = withToolbar && !Array.isArray(children);\n  return _react[\"default\"].createElement(PreviewContainer, props, _react[\"default\"].createElement(PreviewWrapper, {\n    withSource: withSource,\n    withToolbar: showToolbar\n  }, showToolbar && _react[\"default\"].createElement(_Toolbar.Toolbar, {\n    border: true,\n    zoom: function zoom(z) {\n      return setScale(scale * z);\n    },\n    resetZoom: function resetZoom() {\n      return setScale(1);\n    },\n    storyId: getStoryId(children),\n    baseUrl: \"./iframe.html\"\n  }), _react[\"default\"].createElement(_ZoomContext.ZoomContext.Provider, {\n    value: {\n      scale: scale\n    }\n  }, _react[\"default\"].createElement(ChildrenContainer, {\n    isColumn: isColumn,\n    columns: columns\n  }, Array.isArray(children) ? children.map(function (child, i) {\n    return _react[\"default\"].createElement(\"div\", {\n      key: i.toString()\n    }, child);\n  }) : _react[\"default\"].createElement(\"div\", null, children))), withSource && _react[\"default\"].createElement(_ActionBar.ActionBar, {\n    actionItems: [actionItem]\n  })), withSource && source);\n};\n\nexports.Preview = Preview;\nPreview.displayName = \"Preview\";","map":null,"metadata":{},"sourceType":"script"}